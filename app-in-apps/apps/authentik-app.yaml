helm:
  releaseName: my-authentik
  valuesObject:
    authentik:
      secret_key: "env://AUTHENTIK_SECRET_KEY"
      postgresql:
        password: "env://AUTHENTIK_POSTGRESQL__PASSWORD"
      error_reporting:
        enabled: false
    postgresql:
      enabled: true
      auth:
        existingSecret: authentik-env-secrets
        passwordKey: password
        postgresPasswordKey: postgres-password
        replicationPasswordKey: replication-password
    redis:
      enabled: true
    server:
      env:
        - name: AUTHENTIK_POSTGRESQL__PASSWORD
          valueFrom:
            secretKeyRef:
              name: authentik-env-secrets
              key: password
        - name: AUTHENTIK_SECRET_KEY
          valueFrom:
            secretKeyRef:
              name: authentik-env-secrets
              key: secret_key
      ingress:
        https: true
        ingressClassName: haproxy
        enabled: true
        hosts:
          - authentik.nexus-core.dev
        tls:
          - secretName: authentik-server-tls
            hosts:
              - authentik.nexus-core.dev
    worker:
      env:
        - name: AUTHENTIK_POSTGRESQL__PASSWORD
          valueFrom:
            secretKeyRef:
              name: authentik-env-secrets
              key: password
        - name: AUTHENTIK_SECRET_KEY
          valueFrom:
            secretKeyRef:
              name: authentik-env-secrets
              key: secret_key