apiVersion: v1
kind: ConfigMap
metadata:
  name: glance
  namespace: glance
  labels:
    app: glance
data:
  glance.yml: |
    theme:
      background-color: 232 23 18
      contrast-multiplier: 1.2
      primary-color: 220 83 75
      positive-color: 105 48 72
      negative-color: 351 74 73
    pages:
      - name: Home
        # Optionally, if you only have a single page you can hide the desktop navigation for a cleaner look
        # hide-desktop-navigation: true
        columns:
          - size: small
            widgets:

              - type: calendar
                first-day-of-week: monday

          - size: full
            widgets:
              - type: bookmarks
                groups:
                  - title: Useful
                    color: 0 200 40
                    links:
                      - title: Gmail
                        url: https://mail.google.com/mail/u/0/
                      - title: Amazon
                        url: https://www.amazon.com/
                      - title: Github
                        url: https://github.com/
                      - title: Wikipedia
                        url: https://en.wikipedia.org/
                  - title: Entertainment
                    color: 10 70 50
                    links:
                      - title: Netflix
                        url: https://www.netflix.com/
                      - title: Disney+
                        url: https://www.disneyplus.com/
                      - title: YouTube
                        url: https://www.youtube.com/
                      - title: Prime Video
                        url: https://www.primevideo.com/
                  - title: Social
                    color: 200 50 50
                    links:
                      - title: Reddit
                        url: https://www.reddit.com/
                      - title: Twitter
                        url: https://twitter.com/
                      - title: Instagram
                        url: https://www.instagram.com/
              - type: videos
                channels:
                  - UCXuqSBlHAE6Xw-yeJA0Tunw
                  - UCBJycsmduvYEL83R_U4JriQ
                  - UCHnyfMqiRRG1u-2MsSQLbXA
              - type: custom-api
                title: Astronomy Picture of the Day
                cache: 1d
                url: https://api.nasa.gov/planetary/apod?api_key=qtyasrGwKC7rcSBxJd2E53LccTZLvBaau0CgAZm1
                headers:
                  Accept: application/json
                template: |
                  {{- if eq (.JSON.String "media_type") "image" -}}
                    <div style="display:flex; justify-content:center; align-items:center; width:100%; height:100%;">
                      <img
                        src="{{ .JSON.String "url" }}"
                        alt="{{ .JSON.String "title" }}"
                        style="max-width:100%; height:auto; display:block; border-radius:4px;"
                      />
                    </div>
                  {{- else -}}
                    <p class="color-negative" style="text-align:center;">No image available today.</p>
                  {{- end }}

          - size: small
            widgets:
              - type: weather
                units: imperial
                hour-format: 12h
                location: New York,US
              - type: custom-api
                title: Air Quality
                cache: 10m
                url: https://api.waqi.info/feed/geo:42.391866;-71.099912/?token=4633e1f9ed26aa95327cd6744ad40c180682491f
                template: |
                  {{ $aqi := printf "%03s" (.JSON.String "data.aqi") }}
                  {{ $aqiraw := .JSON.String "data.aqi" }}
                  {{ $updated := .JSON.String "data.time.iso" }}
                  {{ $humidity := .JSON.String "data.iaqi.h.v" }}
                  {{ $ozone := .JSON.String "data.iaqi.o3.v" }}
                  {{ $pm25 := .JSON.String "data.iaqi.pm25.v" }}
                  {{ $pressure := .JSON.String "data.iaqi.p.v" }}

                  <div class="flex justify-between">
                    <div class="size-h5">
                      {{ if le $aqi "050" }}
                        <div class="color-positive">Good air quality</div>
                      {{ else if le $aqi "100" }}
                        <div class="color-primary">Moderate air quality</div>
                      {{ else }}
                        <div class="color-negative">Bad air quality</div>
                      {{ end }}
                    </div>
                  </div>

                  <div class="color-highlight size-h2">AQI: {{ $aqiraw }}</div>
                  <div style="border-bottom: 1px solid; margin-block: 10px;"></div>

                  <div class="margin-block-2">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">

                      <div>
                        <div class="size-h3 color-highlight">{{ $humidity }}%</div>
                        <div class="size-h6">HUMIDITY</div>
                      </div>

                      <div>
                        <div class="size-h3 color-highlight">{{ $ozone }} μg/m³</div>
                        <div class="size-h6">OZONE</div>
                      </div>

                      <div>
                        <div class="size-h3 color-highlight">{{ $pm25 }} μg/m³</div>
                        <div class="size-h6">PM2.5</div>
                      </div>

                      <div>
                        <div class="size-h3 color-highlight">{{ $pressure }} hPa</div>
                        <div class="size-h6">PRESSURE</div>
                      </div>

                    </div>

                    <div class="size-h6" style="margin-top: 10px;">Last Updated at {{ slice $updated 11 16 }}</div>
                  </div>
              - type: custom-api
                title: Daily Chess Puzzle
                cache: 6h
                url: https://api.chess.com/pub/puzzle
                template: |
                  <div style="text-align: center;">
                    <h3 style="font-size: 1.5rem; margin: 0 0 8px 0;">
                      <a href="{{ .JSON.String "url" }}" target="_blank" style="text-decoration: underline;">
                        {{ .JSON.String "title" }}
                      </a>
                    </h3>
                    <img src="{{ .JSON.String "image" }}" alt="Daily Chess Puzzle" style="max-width:100%; height:auto; border-radius: 3px;">
                  </div>
              - type: twitch-channels
                channels:
                  - cohhcarnage
                  - quin69
                  - moonmoon
      - name: Feed
        # Optionally, if you only have a single page you can hide the desktop navigation for a cleaner look
        # hide-desktop-navigation: true
        columns:
          - size: full
            widgets:
              - type: rss
                limit: 10
                collapse-after: 3
                cache: 12h
                feeds:
                  - url: https://selfh.st/rss/
                    title: selfh.st
                    limit: 4
                  - url: https://ciechanow.ski/atom.xml
                  - url: https://www.joshwcomeau.com/rss.xml
                    title: Josh Comeau
                  - url: https://samwho.dev/rss.xml
                  - url: https://ishadeed.com/feed.xml
                    title: Ahmad Shadeed